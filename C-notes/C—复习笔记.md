# C语言

## 编程的流程

1. 编辑 Editing		编写源代码.c文件
2. 编译 Compiling		将源代码转换为汇编代码或目标代码
3. 连接 Linking		合并编译后的目标文件与库文件生成可执行文件
4. 执行 Executing		运行后生成的可执行程序文件

## 标识符命名规则

由英文字母，数字和下划线组成

首字符必须是字母或者下划线

长度不大于32个字符 （ANSI C标准）

## 基本数据类型

-   整形：int		4个字节（32位）
-   短整型：short		一般占用较小储存空间 至少为16位，但具体大小依赖于实现  
-   长整型：long		8个字节（64位）
-   单精度浮点型:float   4个字节  精度有限
-   双精度浮点型:double  8个字节 精度更高
-   字符型:char		存储单个字符，通常占用1个字节，并且可以自动类型转换为整数类型，其值对应ASCII码表或Unicode码

```c
char ab;  
char = a = '1'  //单引号引起来的是字符，如果没有被单引号引用的就是字母或者数字
```

-   布尔型（Boolean Type）:C99标准正式引入了，bool类型，在实际编程中通常用0或非0的值表示逻辑真（true）和逻辑假（false）

-   枚举型:（enum）：用于定义一组具有离散值的常量，它可以让数据更简洁，更易读。通常用于为程序中的一组相关的常量取名字，以便于程序的可读性和维护性。

    ```c
    // enum　枚举名　{枚举元素1,枚举元素2,……};
    
    #define MON  1
    #define TUE  2
    #define WED  3
    #define THU  4
    #define FRI  5
    #define SAT  6
    #define SUN  7
    
    enum DAY
    {
          MON=1, TUE, WED, THU, FRI, SAT, SUN
    };
    ```

    

## 变量的定义与使用

定义：在C语言中，变量的定义意味着为变量分配内存空间，并可以同时初始化它

>   变量的命名最好见名知意
>
>   变量命名支持 字母、数字、下划线但要区分大小写并且不可以用数字开头

##### 定义格式：数据类型 变量名 = 初始值；

> 声明：如果之声明变量不分配内存空间，通常是在函数外部使用extern关键字或在函数内部使用static关键字来表达声明的目的。
>
> extern 数据类型 变量名；  //在其他文件已经定义过的变量，在当前文件进行声明
>
> static 数据类型 变量名；  //在函数内部声明一个静态布局变量，生命周期从程序开始到结束



### 本地变量

-   函数的每一次运行，就会产生一个独立的变量空间，在这个空间中的变量，是函数的这次运行所独有的，其被称作本地变量
-   定义在函数内部的变量就是本地变量
-   参数也是本地变量

##### 本地变量的定义规则：

-   本地变量是定义在块内的
    -   其可以被定义在函数的块内
    -   也可以定义在语句的块内
    -   甚至可以随便拉出一对大括号来定义
-   程序的运行在进入这个块之前，其中的变量不存在，离开这个块，其中的变量就会消失
-   块外面定义的变量在块里面仍然有效，及在main函数中定义的变量在内部的函数块中仍然有效
-   如果在块的里面定义了外面同名的变量，变量的值会被覆盖掉



### 作用域和生命期：

局部变量：在函数内部定义的变量具有局部作用域，尽在该函数内可见，函数调用结束后内存会被自动释放

全局变量：在所有函数外部定义的变量具有全局作用域，整个程序范围内都可以访问。全局变量的生命周期贯穿整个程序的执行过程。



## 数据类型转换

#### 自动类型转换

将一种类型的值赋值给另一个类型的变量时，变量会进行自动类型转换

在赋值运算中，赋值号两边的数据类型不同时，需要把右边表达式的类型转换为左边变量的类型，这可能会导致数据失真，或者精度降低；所以说，自动类型转换并不一定是安全的。对于不安全的类型转换，编译器一般会给出警告。

```c
float i = 100;

int n = i;
```

在不同类型的混合运算中，编译器也会自动地转换数据类型，将参与运算的所有数据先转换为同一种类型，然后再进行计算。转换的规则如下：

转换按数据长度增加的方向进行，以保证数值不失真，或者精度不降低。例如，int 和 long 参与运算时，先把 int 类型的数据转成 long 类型后再进行运算。

所有的浮点运算都是以双精度进行的，即使运算中只有 float 类型，也要先转换为 double 类型，才能进行运算。

char 和 short 参与运算时，必须先转换成 int 类型。

![自动类型转换](assets/%E8%87%AA%E5%8A%A8%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2.png)

```c
//自动类型转换示例
#include<stdio.h>
int main(){
    float PI = 3.14159;
    int s1, r = 5;
    double s2;
    s1 = r * r * PI;
    s2 = r * r * PI;
    printf("s1=%d, s2=%f\n", s1, s2);

    return 0;
}

//运行结果：
//s1=78, s2=78.539749
```

在计算表达式`r*r*PI`时，r 和 PI 都被转换成 double 类型，表达式的结果也是 double 类型。但由于 s1 为整型，所以赋值运算的结果仍为整型，舍去了小数部分，导致数据失真。

#### 强制类型转换

##### (type_name) expression

##### (新类型名) 表达式

```c
(float) a;  //将变量 a 转换为 float 类型
(int)(x+y);  //把表达式 x+y 的结果转换为 int 整型
(float) 100;  //将数值 100（默认为int类型）转换为 float 类型
```

```c
#include <stdio.h>
int main(){
    int sum = 103;  //总数
    int count = 7;  //数目
    double average;  //平均数
    average = (double) sum / count;
    printf("Average is %lf!\n", average);

    return 0;
}

//运行结果：
//Average is 14.714286!
```

>   类型转换只是临时性的
>
>   无论是自动类型转换还是强制类型转换，都只是为了本次运算而进行的临时性转换，转换的结果也会保存到临时的内存空间，不会改变数据本来的类型或者值

```c
#include <stdio.h>
int main(){
    double total = 400.8;  //总价
    int count = 5;  //数目
    double unit;  //单价
    int total_int = (int)total;
    unit = total / count;
    printf("total=%lf, total_int=%d, unit=%lf\n", total, total_int, unit);

    return 0;
}

//运行结果：
//total=400.800000, total_int=400, unit=80.160000
```



## 转义字符

| ?    | 在书写连续多个问号时使用，防止他们被解析成三字母词 |
| :--- | -------------------------------------------------- |
| \\`  | 用于表示字符常量`                                  |
| \\"  | 用于表示一个字符产内部的双引号                     |
| \\\  | 用于表示一个反斜杠，防止它被解释为一个转义序列符   |
| \a   | 警告字符，蜂鸣                                     |
| \b   | 退格符                                             |
| \f   | 进纸符                                             |
| \n   | 换行                                               |
| \r   | 回车                                               |
| \t   | 水平制表符                                         |
| \v   | 垂直制表符                                         |
| \ddd | ddd表示1~3个八进制的数字。如：\130X                |
| \xdd | dd表示2个十六进制数字。如:\x30 0                   |



## C语言及其程序设计

控制结构（分支结构、循环结构）

switch-case语句

循环控制语句（while、do-while、for）



##### if 分支结构语句

```c
if(条件表达式){
	//条件达成则运行语句
}

if(条件表达式){
	//条件达成则运行语句
}else{
    //条件不达成则运行语句
}

if(条件表达式1){
	//条件1达成则运行语句
}else if(条件表达式2){
    //条件2达成则运行语句
}else if(条件表达式3){
    //条件3达成则运行语句
}... ...
```

#### switch 选择语句

```c
switch(变量){
    case 值1:
    //代码体
        break;
    case 值2:
    //代码体
        break;
    case 值3:
    //代码体
        break;
    default:
    //代码体
        break; 
}
//case的值必须是整数或者字符
```

#### while 循环语句

```c
while(循环条件){
    //判断成功则运行
}
```

#### do...while 循环语句

```c
do{
    //运行语句
}while(判断条件);
//while与do...while的区别在于，while是先判断在运行，do...while是先运行一遍后在进行判断
```

#### for 循环语句

```c
for(循环变量初值;循环条件;循环变量增值;){
    //循环语句
}
```



## 运算符以及表达式

#### 算数运算符

- 加     __+__
- 减      __-__
- 乘     _*_
- 除      _/_
- 取余   %
- 自增      __++i__
- 自减       __--i__
- 前置自增     __++i__
- 前置自减      __--i__

#### 关系运算符

- 小于(<)
- 大于(>)
- 小于等于(<=)
- 大于等于（>=）
- 等于（==）	判断两边的值是否相等
- 不等于（！=）

#### 赋值运算

-  赋值（=）	将左边的量赋值给右边
- 加法赋值运算（+=）
- 减法赋值运算（-+）
- 乘法赋值运算（*=）
- 除法赋值运算（/=）

#### 逻辑运算

- 与（&&）	左右两边表达式结果都为真,如果
- 或（||）	左右两边表达式结果一边为真即可
- 非（！）	真变假假变真

#### 条件运算符

及 三目运算符

```c
int X=10,Y=20,max;
max = (x>y) ? x:y;
//判断x是否大于y,是则将x赋值给max
```

### 取整

```c
#include<math.c>
int main(){
  float x = 8.5;
  int a,b,c,d;
  
  a=x;//向下取整
  b=floor(x);//向下取整
  c=ceil(x);//向上
  d=round(x);//四舍五入取整
}
```



## 数组

数组一旦创建，不能改变大小

其中所有的元素具有相同的数据类型

数组中的元素在内存中是连续依次排列的

### 一维数组

>   定义格式：<数据类型>  数组名称[元素数量]={值}

```c
//数组的下标是从零开始的
int arr[80]={1,2,3,4,5};
int abc[];
```

 

##### 数组的大小

```c
sizeof(a)/sizeof(a[0])
```

-   sizeof(a[0])给出数组中单个元素的大小，相除就得到了数组的元素个数



### 二维数组

```c
int a[3][5]	//一个3行5列的矩阵
```

| **a[0] [0]** | **a[1] [1]** | **a[0] [2]** | **a[0] [3]** | **a[0] [4]** |
| :----------: | ------------ | :----------: | :----------: | :----------: |
| **a[1] [0]** | **a[1] [1]** | **a[1] [2]** | **a[1] [3]** | **a[1] [4]** |
| **a[2] [0]** | **a[2] [1]** | **a[2] [2]** | **a[2] [3]** | **a[2] [4]** |



```c
int a[][5]={
    {0,1,2,3,4},	//a[0][0]
    {2,3,4,5,6}		//a[1][0]   
}

/*int a[行][列]={

} */
```

在二维数组的定义中列数是必须给出的，行数可以由编译器来数

每行一个{}，用逗号分隔

最后的逗号可以存在，如果省略，表示补零

也可以用定位（*C99 ONLY）

 

## 函数

```c
//函数的定义与使用
函数类型 函数名(形参1,形参2){
	代码体     
}

#include<stdio.h>
void arr(int a,int b){
    int sum;
    sum=a+b;
    return sum;
}
int main(){
    
    int a=5;	 		//实参
    int b=10;			//实参
    
    int sum=arr(a,b);	//实参
    printf("sum=%d",sum)
    return 0;
}
```

>   函数传参和形参数据类型不匹配时，C语言编译器会自动进行类型转换
>
>   函数不能被嵌套



### 传值

-   C语言在调用函数的时候只能传值给函数，每个函数都有独立的变量空间，参数也位于这个独立的空间中，其和其他函数是没有关系的
-   在函数参数表中的参数，叫做  “形式参数”  ，调用函数时给的值，叫做  “实际参数”



```c
arr(a,b)	//逗号是标点符号

f((a,b))	//逗号是运算符
```



## 指针

其就是保存地址的变量

```c
int i;
int*p = &i;
int*p,q;
int *p,q; 
```

### 指针内存

- 变量的值是内存地址
  - 普通变量的值是实际的值
  - 指针变量的值具有实际值的变量的地址

### 作为参数调用

```c
void f(int *p)	//在被调用的时候得到了某个变量的地址
int i=0;f(&i)	//在函数里面可以通过这个指针访问·外面这个i
```

